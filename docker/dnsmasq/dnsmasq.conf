# ============================================================================
# GGnet - dnsmasq Configuration (Alternative to isc-dhcp + tftpd)
# ============================================================================
# dnsmasq provides integrated DHCP + TFTP + DNS (ggRock-style)
# This is simpler and more efficient than separate services
# ============================================================================

# Interface configuration
interface=eth0
bind-interfaces

# DHCP configuration
dhcp-range=192.168.1.100,192.168.1.200,12h
dhcp-option=option:router,192.168.1.1
dhcp-option=option:dns-server,8.8.8.8,8.8.4.4
dhcp-option=option:domain-name,ggnet.local

# PXE Boot configuration
dhcp-boot=tag:!ipxe,undionly.kpxe
dhcp-boot=tag:ipxe,http://192.168.1.10:8000/boot/script.ipxe

# UEFI SecureBoot support
dhcp-match=set:efi-x86_64,option:client-arch,7
dhcp-match=set:efi-x86_64,option:client-arch,9
dhcp-match=set:efi-x86,option:client-arch,6
dhcp-match=set:bios,option:client-arch,0
dhcp-match=set:ipxe,175

# Boot files per architecture
dhcp-boot=tag:efi-x86_64,tag:!ipxe,snponly.efi
dhcp-boot=tag:efi-x86,tag:!ipxe,ipxe32.efi
dhcp-boot=tag:bios,tag:!ipxe,undionly.kpxe

# TFTP configuration
enable-tftp
tftp-root=/var/lib/tftp
tftp-secure
tftp-no-blocksize

# DNS configuration
domain=ggnet.local
expand-hosts

# Logging
log-dhcp
log-queries
log-facility=/var/log/dnsmasq.log

# Performance
cache-size=1000
dns-forward-max=150

# Security
bogus-priv
domain-needed
no-resolv
server=8.8.8.8
server=8.8.4.4

# Static DHCP leases (generated dynamically by GGnet)
# dhcp-host=00:11:22:33:44:55,192.168.1.101,client01,12h

